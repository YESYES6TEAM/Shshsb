<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Server-join code generator</title>
  <style>
    body { font-family: system-ui, -apple-system, Roboto, "Segoe UI", sans-serif; padding: 28px; max-width: 720px; margin: auto; }
    label { display:block; margin-top:12px; }
    input { width: 100%; padding: 8px; font-size: 16px; box-sizing: border-box; }
    button { margin-top: 12px; padding: 10px 14px; font-size: 16px; }
    .output { margin-top: 16px; padding: 12px; background:#f3f3f3; border-radius: 6px; word-break: break-all; }
  </style>
</head>
<body>
  <h2>Server Join Code Generator</h2>

  <label>Prefix (optional) — default: Nytrix
    <input id="prefix" value="Nytrix" />
  </label>

  <label>Game Id (place id)
    <input id="gameId" placeholder="e.g. 123456789" />
  </label>

  <label>Job Id (server instance id)
    <input id="jobId" placeholder="e.g. abcdef-12345-..." />
  </label>

  <label>Optional secret / salt (optional, for uniqueness)
    <input id="salt" placeholder="secret or leave blank" />
  </label>

  <button id="gen">Generate code</button>
  <button id="copy" style="display:none;">Copy code</button>

  <div class="output" id="out" style="display:none;"></div>

  <script>
    // safe base64 for unicode
    function base64Encode(str) {
      return btoa(unescape(encodeURIComponent(str)));
    }

    function genCode(prefix, gameId, jobId, salt) {
      const ts = Date.now();
      const rand = Math.floor(Math.random() * 9e9);
      const payload = `${gameId}|${jobId}|${ts}|${rand}|${salt || ""}`;
      const b64 = base64Encode(payload);
      // final code: prefix + "-" + base64
      return `${prefix}-${b64}`;
    }

    document.getElementById("gen").addEventListener("click", () => {
      const prefix = (document.getElementById("prefix").value || "Nytrix").trim();
      const gameId = document.getElementById("gameId").value.trim();
      const jobId = document.getElementById("jobId").value.trim();
      const salt = document.getElementById("salt").value.trim();

      if (!gameId || !jobId) {
        alert("Please enter both Game Id and Job Id.");
        return;
      }

      const code = genCode(prefix, gameId, jobId, salt);
      const out = document.getElementById("out");
      out.style.display = "block";
      out.textContent = code;

      const copyBtn = document.getElementById("copy");
      copyBtn.style.display = "inline-block";
      copyBtn.onclick = () => {
        navigator.clipboard.writeText(code).then(()=> {
          copyBtn.textContent = "Copied ✅";
          setTimeout(()=> copyBtn.textContent = "Copy code", 1200);
        });
      };
    });
  </script>
</body>
</html>
